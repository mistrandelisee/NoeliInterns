<template>
    <c-rh_toast auto-close-time="6000"></c-rh_toast>
    <template if:false={hasrecordid}>
    <template if:true={showList}>
        <div class="slds-clearfix">
            <!-- <button class="slds-button slds-button_brand slds-float_right">New Project</button> -->
            <lightning-button label="New Project" class="slds-float_right" onclick={handlecreate}></lightning-button>
        </div>
        <div>
            

                        <c-rh_cards_view page-size="5"  items={tabReq} onrowselected={handleCardAction}></c-rh_cards_view>
        </div>
        <!-- <div slot="footer" class="slds-var-m-vertical_medium">
            <c-pagination records={initial} record-size="3" onupdate={updateProjectHandler}></c-pagination>
        </div> -->
    </template>

    <template if:true={showInsertform}>
        <div class="slds-clearfix">
            <!-- <button class="slds-button slds-button_brand slds-float_right">New Project</button> -->
            <lightning-button label="Back" class="slds-float_left" onclick={handleBack111}></lightning-button>
        </div>
        <div class="slds-var-m-vertical_medium">
            <c-rh_dynamic_form  inputs-items={inputsItems}></c-rh_dynamic_form>
        </div>
        <div class="slds-clearfix">
            <!-- <button class="slds-button slds-button_brand slds-float_right">New Project</button> -->
            <lightning-button label="Next" class="slds-float_right" onclick={handleNext}></lightning-button>
        </div>
    </template>

    <template if:true={showAddMembers}>
        <div class="slds-clearfix">
            <lightning-button label="Back" class="slds-float_left" onclick={handleBack111}></lightning-button>
        </div>
        <div class="slds-var-m-vertical_medium">
            <c-rh_add_and_remove   initial={allInitialContacts}></c-rh_add_and_remove>
        </div>
        <div class="slds-clearfix">
            <lightning-button label="Save" class="slds-float_right" onclick={handleSave} data-id="only"></lightning-button>
            <lightning-button label="Save and Activate" class="slds-float_right" onclick={handleSave} data-id="actif"></lightning-button>
        </div>
    </template>
    
    </template>

    <template if:true={hasrecordid}>
        <template if:true={showDetails}>
            <div class="slds-clearfix">
                <!-- <button class="slds-button slds-button_brand slds-float_right">New Project</button> -->
                <lightning-button label="Back" class="slds-float_left" onclick={handleBack}></lightning-button>
                <lightning-button label="Edit" class="slds-float_right" onclick={handleEdit}></lightning-button>
                <lightning-button label="ADD Attachment" class="slds-float_right" onclick={handleAttach}></lightning-button>
            </div>
            <div class="slds-var-m-vertical_medium">
                <c-rh_display_fields output-fields={curentDetails} title="Project Details"></c-rh_display_fields>
            </div>
                <div class="slds-page-header slds-page-header_record-home slds-var-m-vertical_medium slds-clearfix">
                    <p class="slds-align_absolute-center lds-page-header__title slds-truncate"> Members</p>
                    <lightning-button-icon icon-name="utility:edit"  alternative-text="Edit" title="Edit" onclick={handleManage} class="slds-float_right"></lightning-button-icon>
                </div>
                <div class="slds-page-header__row slds-page-header__row_gutters">
                    <div class="slds-scrollable slds-grid slds-gutters slds-page-header__col-details slds-align_absolute-center" style="height:10rem;width:14rem">
                            <ol class="slds-list_ordered">
                                <template class="slds-align_absolute-center" for:each={memberProjects} for:item="acc">
                                    <li key={acc.RH_Contact__r.Name}>{acc.RH_Contact__r.Name}</li>
                                
                                </template>
                            </ol>
                    </div>
                </div>
                <div class="slds-var-m-vertical_medium">
                    <lightning-card title="Preview and Download Attachment file" icon-name="doctype:attachment">
                        <template for:each={filesList} for:item="file">
                            <div key={file.value} class="slds-box">
                                <div class="slds-grid slds-wrap">
                                    <div class="slds-col slds-large-size_4-of-12 slds-medium-size_4-of-12 slds-size_12-of-12">
                                    <p><strong>FileName - </strong>{file.label}</p>
                                    </div>
                                    <div class="slds-col slds-large-size_4-of-12 slds-medium-size_4-of-12 slds-size_12-of-12">
                                    <a href={file.url} download={file.fname}>Download</a>
                                    </div>
                                    <div class="slds-col slds-large-size_4-of-12 slds-medium-size_4-of-12 slds-size_12-of-12">
                                    <!-- <lightning-button label="Preview" 
                                    variant="brand"
                                    data-id={file.value}
                                    onclick={previewHandler}
                                    ></lightning-button> -->
                                    </div>
                                </div>
                            </div>
                        </template>
                </lightning-card>
                </div>
        </template>
        <template if:true={showEdit}>
            <div class="slds-clearfix">
                <lightning-button label="Back" class="slds-float_left" onclick={handleBackToDetails}></lightning-button>
            </div>
            <div class="slds-var-m-vertical_medium">
                <!-- <c-rh_edit_project  record-id={curentProject}></c-rh_edit_project> -->
                <c-rh_dynamic_form inputs-items={curentDetails}></c-rh_dynamic_form>
            </div>
            <div class="slds-clearfix">
                <lightning-button label="Save" class="slds-float_right" onclick={handleSaveEdit}></lightning-button>
            </div>
        </template>

        <template if:true={showManage}>
            <div class="slds-clearfix">
                <!-- <button class="slds-button slds-button_brand slds-float_right">New Project</button> -->
                <lightning-button label="Back" class="slds-float_left" onclick={handleBackToDetails}></lightning-button>
            </div>
            <div class="slds-var-m-vertical_medium">
                <c-rh_add_and_remove  selected={memberSelected} initial={memberNotSelected}></c-rh_add_and_remove>
            </div>
            <div class="slds-var-m-top_medium slds-clearfix">
                <lightning-button variant="brand"  label="Save" class="slds-float_right" onclick={handleSaveEditMember}>
                </lightning-button>
            </div>
        </template>

        <template if:true={addAttach}>
            <div class="slds-clearfix">
                <lightning-button label="Back" class="slds-float_left" onclick={handleBackToDetails}></lightning-button>
            </div>
            <div class="slds-var-m-vertical_medium">
                <lightning-card title="File Upload" icon-name="doctype:attachment">
                    <div class="slds-m-around_medium">
                        <lightning-input type="file" 
                        accept=".xlsx, .xls, .csv, .png, .doc, .docx, .pdf"
                        label="Attachment" onchange={openfileUpload}></lightning-input>
                    </div>
                    <template if:true={fileData}>
                        <p>{fileData.filename}</p>
                    </template>
                    <lightning-button variant="brand" label="submit" title="Submit" onclick={handleClick} class="slds-m-left_x-small"></lightning-button>
                </lightning-card>
            </div>
        </template>

    </template>
    
  

  

    
</template>